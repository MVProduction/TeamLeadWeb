<!-- Основной вид со списком объявлений -->

{% extends "main/main_layout.html" %}

<!-- Создаёт объявление -->
{% macro createPost(post) %}
<div class="col-md-12">
  <div class="card mb-4 shadow-sm">
    <div class="card-body">
      <div class="d-flex">
        <div class="pr-3">
          <img style="width: 80px;height: auto;" class="rounded pb-3"
            src="https://www.w3schools.com/bootstrap4/newyork.jpg">
        </div>
        <div class="text-muted fs-10 flex-1">
          <div class="strong">Карапучило</div>
          <div>Без оплаты</div>
          <div>
            <a href="#">C#</a>
            <a href="#">GameDev</a>
          </div>
        </div>
        <small class="text-muted">
          32 минуты назад
        </small>
      </div>
      <p class="card-title">
        <a href="post/{{ post.postId }}"><strong>{{ post.postTitle }}</strong></a>
      </p>
      <p class="card-text text-muted pb-2">{{ post.postText }}...</p>
      <div class="d-flex align-items-center">
        <div class="pr-4">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <title>Количество просмотров</title>
            <path fill="#777"
              d="M12 9q1.219 0 2.109 0.891t0.891 2.109-0.891 2.109-2.109 0.891-2.109-0.891-0.891-2.109 0.891-2.109 2.109-0.891zM12 17.016q2.063 0 3.539-1.477t1.477-3.539-1.477-3.539-3.539-1.477-3.539 1.477-1.477 3.539 1.477 3.539 3.539 1.477zM12 4.5q3.703 0 6.703 2.063t4.313 5.438q-1.313 3.375-4.313 5.438t-6.703 2.063-6.703-2.063-4.313-5.438q1.313-3.375 4.313-5.438t6.703-2.063z">
            </path>
          </svg>
          <span class="fs-11 text-muted">12</span>
        </div>
        <div class="px-4">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <title>Количество комментариев</title>
            <path fill="#777"
              d="M18 8.016v-2.016h-12v2.016h12zM14.016 14.016v-2.016h-8.016v2.016h8.016zM6 9v2.016h12v-2.016h-12zM20.016 2.016q0.797 0 1.383 0.586t0.586 1.383v12q0 0.797-0.586 1.406t-1.383 0.609h-14.016l-3.984 3.984v-18q0-0.797 0.586-1.383t1.383-0.586h16.031z">
            </path>
          </svg>
          <span class="fs-11 text-muted">10</span>
        </div>
        <div class="px-4 flex-1">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <title>Добавить в избранное</title>
            <path fill="#dc3545"
              d="M12 21.328l-1.453-1.313q-2.484-2.25-3.609-3.328t-2.508-2.672-1.898-2.883-0.516-2.648q0-2.297 1.57-3.891t3.914-1.594q2.719 0 4.5 2.109 1.781-2.109 4.5-2.109 2.344 0 3.914 1.594t1.57 3.891q0 1.828-1.219 3.797t-2.648 3.422-4.664 4.359z">
            </path>
          </svg>
          <span class="fs-11 text-muted">1</span>
        </div>
        <div>
          <a href="post/{{ post.postId }}" class="btn btn-outline-primary fs-11">Читать дальше</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endmacro %}

{% block body %}
<main>
  <section class="text-center bg-light py-5"
    data-background="/images/index-bg-2.jpg"
    style="background-image: url(/images/index-bg-2.jpg);">
    <div id="search-container" class="container pt-5 pb-5">
      <h2 class="py-5 light">{{ quote }}</h2>
      <div id="search-panel" class="row row py-4 mx-4">
        <div class="d-flex flex-1 align-items-center">
          <input type="text" placeholder="Строка поиска" class="w-100 h-100 pl-3 border0">
        </div>
        <div class="d-flex align-items-center">
          <button type="button" style="width: 110px;" class="btn btn-primary border0 h-100">Найти</button>
        </div>
      </div>
      <p class="lead text-muted pt-3 pb-2">Не нашли подходящего проекта? Не беда. Начните свой!</p>
      <p>
        <a href="/create_post" class="btn btn-primary px-5 py-2">Начать проект</a>
      </p>
    </div>
  </section>

  <div class="py-2 d-flex justify-content-center" style="background: #e4e4e4;">
    <div class="pr-5">
      <div class="text-center strong">
        1 000
      </div>
      <div>
        Проектов
      </div>
    </div>
    <div class="pr-5">
      <div class="text-center strong">
        212
      </div>
      <div>
        Пользователей
      </div>
    </div>
    <button class="btn btn-danger">
      <img src="images/google-play.svg">
    </button>
  </div>
</main>

<div class="container bg-light">
  <h3 class="pt-5 pb-1">Категории</h1>
    <div>
      <a href="#" class="px-1">Новое</a>
      <a href="#" class="px-1">Популярное</a>
      <a href="#" class="px-1">Избранное</a>
      <a href="#" class="px-1">Моё</a>
      <a href="#" class="px-1">Архив</a>
    </div>
    <h3 class="pt-4 pb-1">Тэги</h3>
    <div class="pb-5">
      <a href="#" class="px-1">Java</a>
      <a href="#" class="px-1">C#</a>
      <a href="#" class="px-1">Backend</a>
      <a href="#" class="px-1">Frontend</a>
      <a href="#" class="px-1">GameDev</a>
    </div>
    <div class="row">
      {# Объявления #}
      {% for post in postList %}
      {{ createPost(post) }}
      {% endfor %}
    </div>
    <div id="post-pager" class="d-flex">      
      {% for pageInd in pageIndexes %}
      <a href="/page{{ pageInd + 1 }}" class="btn btn-outline-secondary mr-2">{{ pageInd + 1 }}</a>
      {% endfor %}
      
      {% if hasPages %}
      <a href="#" class="btn btn-outline-secondary mr-2">Следующая</a>
      {% endif %}
    </div>
</div>

{% endblock %}